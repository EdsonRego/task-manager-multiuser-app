server:
  port: 8080

spring:
  main:
    allow-circular-references: false  # ← fora de datasource!

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_DATABASE:taskmanagerdb}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 20000
      maximum-pool-size: 5

  jpa:
    hibernate:
      ddl-auto: none   # Flyway controla o schema
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  flyway:
    enabled: true
    locations: classpath:db/migration

logging:
  level:
    root: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: INFO
    org.springframework.security: INFO
  include-exception: true
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n"

jwt:
  # ✅ Chave forte e compatível com JwtService
  secret: Y2hhbmdlLXRob3Mtc3VwZXItc2VjcmV0LWtleS1hdC1sZWFzdC0zMi1ieXRlcy1sb25n

app:
  cors:
    allowed-origins:
      # ✅ Mantido (frontend Vite)
      - http://localhost:5173
      - http://127.0.0.1:5173  # ← adicionado opcionalmente, compatível com testes locais
